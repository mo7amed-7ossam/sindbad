<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>طلب استشارة - السندباد</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header/Navbar -->
    <header>
        <nav class="navbar">
            <div class="container nav-flex">
                <a href="index.html" class="logo">
                    <img src="assets/imgs/logo.svg" alt="شعار السندباد" class="logo-img">
                </a>
                <button class="nav-toggle" aria-label="فتح القائمة">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <ul class="nav-links">
                    <li><a href="index.html">الرئيسية</a></li>
                    <li><a href="index.html#about">من نحن</a></li>
                    <li><a href="index.html#kitchen-models">تصاميمنا</a></li>
                    <li><a href="index.html#steps">كيف نعمل</a></li>
                    <li><a href="index.html#why-us">لماذا نحن</a></li>
                    <li><a href="index.html#contact">تواصل معنا</a></li>
                </ul>
                <div class="nav-actions">
                    <a href="consult.html" class="btn btn-primary">أحجز موعدك الأن</a>
                </div>
            </div>
        </nav>
        <div class="nav-overlay"></div>
    </header>

    <!-- Consultation Form Section -->
    <section class="consultation-form">
        <div class="container">
            <div class="form-grid">
                <div class="form-content">
                    <h1>طلب استشارة مجانية</h1>
                    <p>نقدم لك استشارة مجانية من خبرائنا لتصميم مطبخك المثالي. املأ النموذج وسنتواصل معك في أقرب وقت.</p>
                    <div class="form-features">
                        <div class="feature">
                            <i class="fas fa-check-circle"></i>
                            <span>استشارة مجانية</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-clock"></i>
                            <span>رد سريع خلال 24 ساعة</span>
                        </div>
                    </div>
                </div>
                <div class="form-container">
                    <form id="consultationForm">
                        <div class="form-step active" data-step="1">
                            <div class="form-group">
                                <label for="name">الاسم الكامل</label>
                                <input type="text" id="name" name="name">
                            </div>
                            <div class="form-group">
                                <label for="phone">رقم الهاتف</label>
                                <input type="tel" id="phone" name="phone">
                            </div>
                            <div class="form-group">
                                <label for="governorate">الولاية</label>
                                <select id="governorate" name="governorate">
                                    <option value="">اختر الولاية</option>
                                    <option value="muscat">مسقط</option>
                                    <option value="musandam">مسندم</option>
                                    <option value="dhofar">ظفار</option>
                                    <option value="musanah">مسناه</option>
                                    <option value="buraimi">البريمي</option>
                                    <option value="dakhiliyah">الداخلية</option>
                                    <option value="north_batinah">شمال الباطنة</option>
                                    <option value="south_batinah">جنوب الباطنة</option>
                                    <option value="north_sharqiyah">شمال الشرقية</option>
                                    <option value="south_sharqiyah">جنوب الشرقية</option>
                                    <option value="dhahirah">الظاهرة</option>
                                    <option value="wusta">الوسطى</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="budget">الميزانية المتوقعة</label>
                                <select id="budget" name="budget">
                                    <option value="">اختر الميزانية</option>
                                    <option value="2500-3500">من 2500 إلى 3500 ريال عماني</option>
                                    <option value="3500-5500">من 3500 إلى 5500 ريال عماني</option>
                                    <option value="5500-10000">من 5500 إلى 10000 ريال عماني</option>
                                    <option value="other">غير ذلك</option>
                                </select>
                            </div>
                            <div class="form-navigation">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-paper-plane"></i>
                                    إرسال الطلب
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Success Popup -->
    <div class="success-popup" id="successPopup">
        <div class="popup-content">
            <i class="fas fa-check-circle"></i>
            <h3>تم إرسال طلبك بنجاح!</h3>
            <p>سنتواصل معك في أقرب وقت</p>
        </div>
    </div>

    <!-- WhatsApp Floating Button -->
    <a href="https://wa.me/96871155500" class="whatsapp-float" target="_blank" title="تواصل عبر واتساب">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Footer -->
    <footer data-aos="fade-up">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <img src="assets/imgs/logo.svg" alt="شعار السندباد" class="logo-img">
                    <p>نحن نقدم أفضل تصاميم المطابخ بأحدث المواصفات العالمية، مع ضمان الجودة والخدمة المتميزة لعملائنا الكرام.</p>
                    <div class="social-links">
                        <a href="#" title="فيسبوك"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" title="تويتر"><i class="fab fa-twitter"></i></a>
                        <a href="#" title="انستغرام"><i class="fab fa-instagram"></i></a>
                        <a href="#" title="لينكد إن"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>روابط سريعة</h4>
                        <ul>
                            <li><a href="index.html">الرئيسية</a></li>
                            <li><a href="index.html#about">من نحن</a></li>
                            <li><a href="index.html#kitchen-models">تصاميمنا</a></li>
                            <li><a href="index.html#steps">كيف نعمل</a></li>
                            <li><a href="index.html#why-us">لماذا نحن</a></li>
                            <li><a href="index.html#contact">تواصل معنا</a></li>
                            <li><a href="consult.html">احجز استشارة</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h4>تواصل معنا</h4>
                        <ul>
                            <li>
                                <a href="tel:+96871155500">
                                    <i class="fas fa-phone"></i>
                                    +968 7115 5500
                                </a>
                            </li>
                            <li>
                                <a href="mailto:info@sindbad.om">
                                    <i class="fas fa-envelope"></i>
                                    info@sindbad.om
                                </a>
                            </li>
                            <li>
                                <a href="https://maps.google.com/?q=المعبيلة+السابعة+مسقط" target="_blank">
                                    <i class="fas fa-map-marker-alt"></i>
                                    المعبيلة - عبري - ابراء - صلالة
                                </a>
                            </li>
                            <li>
                                <a href="https://wa.me/96871155500" target="_blank">
                                    <i class="fab fa-whatsapp"></i>
                                    تواصل عبر واتساب
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© 2025 السندباد – الوكيل الحصري لـ أوپين | جميع الحقوق محفوظة</p>
            </div>
        </div>
    </footer>

    <style>
        /* Navbar Styles */
        .navbar {
            background: #fff;
            padding: 0.8rem 0;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border-bottom: 1px solid rgba(75, 163, 179, 0.2);
            height: 70px;
        }

        .nav-flex {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 0;
            height: 100%;
        }

        .logo-img {
            height: 35px;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: #2C3E50;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: #4BA3B3;
        }

        .nav-actions .btn {
            padding: 0.5rem 1.5rem;
        }

        /* Mobile Menu Styles */
        .nav-toggle {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            padding: 10px;
            z-index: 1001;
        }

        .nav-toggle span {
            display: block;
            width: 25px;
            height: 2px;
            background: #333;
            margin: 5px 0;
            transition: 0.3s;
            border-radius: 2px;
        }

        .nav-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .nav-toggle.active span:nth-child(2) {
            opacity: 0;
        }

        .nav-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        /* Main Content Spacing */
        .consultation-form {
            padding: 90px 0 40px;
            background: #F8F8FA;
            min-height: calc(100vh - 70px);
            position: relative;
            z-index: 1;
        }

        .form-grid {
            display: flex;
            flex-direction: column;
            gap: 40px;
            align-items: center;
        }

        .form-content {
            text-align: center;
            margin-bottom: 0;
            position: relative;
            padding: 15px;
            width: 100%;
            max-width: 800px;
        }

        .form-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.05);
            padding: 30px;
            width: 100%;
            max-width: 800px;
        }

        .form-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
            padding: 0 20px;
        }

        .form-progress::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: #4BA3B3;
            opacity: 0.2;
            z-index: 1;
        }

        .progress-step {
            position: relative;
            z-index: 2;
            background: white;
            padding: 0 15px;
            text-align: center;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #F8F8FA;
            color: #4BA3B3;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: bold;
            border: 2px solid #4BA3B3;
            transition: all 0.3s ease;
        }

        .progress-step.active .step-number {
            background: #4BA3B3;
            color: white;
        }

        .step-title {
            font-size: 14px;
            color: #2C3E50;
            font-weight: 500;
        }

        .progress-step.active .step-title {
            color: #4BA3B3;
            font-weight: 600;
        }

        .form-step {
            display: none;
            background: white;
            border-radius: 12px;
        }

        .form-step.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 20px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #2C3E50;
            font-weight: 500;
        }

        .form-group label::after {
            content: ' *';
            color: #E74C3C;
        }

        .form-group .error-message {
            color: #E74C3C;
            font-size: 0.85rem;
            margin-top: 5px;
            padding: 5px 10px;
            background-color: #FDF2F2;
            border-radius: 4px;
            border-right: 3px solid #E74C3C;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .form-group input.error,
        .form-group select.error {
            border-color: #E74C3C;
            background-color: #FDF2F2;
        }

        .form-group input.error:focus,
        .form-group select.error:focus {
            box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #E0E0E0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #F8F8FA;
            font-family: 'Cairo', sans-serif;
            color: #2C3E50;
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: #4BA3B3;
            outline: none;
            box-shadow: 0 0 0 3px rgba(75, 163, 179, 0.1);
            background: white;
        }

        .form-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #F0F0F0;
            gap: 15px;
        }

        .form-navigation .btn {
            flex: 1;
            justify-content: center;
            padding: 12px 20px;
            font-size: 1rem;
            font-weight: 600;
            min-width: 120px;
            font-family: 'Cairo', sans-serif;
            letter-spacing: 0.3px;
        }

        .btn-primary {
            background: #4BA3B3;
            color: white;
            font-weight: 700;
        }

        .btn-secondary {
            background: #F8F8FA;
            color: #2C3E50;
            border: 1px solid #E0E0E0;
            font-weight: 600;
        }

        .form-content h1 {
            color: #4BA3B3;
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .form-content p {
            color: #7F8C8D;
            font-size: 1rem;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .form-features {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .feature {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #2C3E50;
        }

        .feature i {
            color: #4BA3B3;
            font-size: 1.2rem;
        }

        .contact-info {
            margin-top: 30px;
            padding: 25px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .contact-info h3 {
            color: #2C3E50;
            margin-bottom: 20px;
            font-size: 1.4rem;
            text-align: center;
            font-weight: 600;
        }

        .contact-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .contact-item {
            padding: 15px;
            background: #F8F8FA;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .contact-item:hover {
            background: #f0f0f0;
        }

        .contact-item h4 {
            color: #2C3E50;
            font-size: 1.1rem;
            margin-bottom: 5px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .contact-item h4 i {
            color: #4BA3B3;
            font-size: 1.2rem;
        }

        .contact-item p {
            color: #7F8C8D;
            margin: 0;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .contact-item a {
            color: #4BA3B3;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .contact-item a:hover {
            color: #3D8A99;
        }

        @media (max-width: 992px) {
            .navbar {
                height: 65px;
            }

            .nav-flex {
                position: relative;
            }

            .nav-toggle {
                display: block;
                order: 3;
            }

            .nav-links {
                position: fixed;
                top: 0;
                right: -100%;
                width: 80%;
                max-width: 400px;
                height: 100vh;
                background: #fff;
                flex-direction: column;
                padding: 80px 20px 20px;
                transition: 0.3s ease-in-out;
                box-shadow: -5px 0 15px rgba(0,0,0,0.1);
                z-index: 999;
            }

            .nav-links.open {
                right: 0;
            }

            .nav-links li {
                width: 100%;
                text-align: right;
                margin: 10px 0;
            }

            .nav-links li a {
                display: block;
                padding: 10px 0;
                font-size: 18px;
                border-bottom: 1px solid #eee;
            }

            .nav-actions {
                margin-right: auto;
                margin-left: 20px;
            }

            .nav-actions .btn {
                padding: 8px 15px;
                font-size: 14px;
            }

            .consultation-form {
                padding-top: 85px;
            }

            /* Form Styles */
            .form-grid {
                gap: 30px;
            }

            .form-content {
                position: static;
                padding: 25px;
                margin-bottom: 25px;
            }

            .form-container {
                max-width: 800px;
                margin: 0 auto;
            }

            .form-content h1 {
                font-size: 1.8rem;
            }

            /* Overlay when menu is open */
            .nav-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                z-index: 998;
            }

            .nav-overlay.active {
                display: block;
            }
            .contact-item h4{
                width: fit-content;
                margin: 0 auto 5px;
                justify-content: center;
                text-align: center;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                height: 60px;
            }

            .consultation-form {
                padding-top: 80px;
            }

            .nav-links {
                width: 100%;
                max-width: none;
            }

            .nav-actions {
                display: none;
            }

            .nav-links .btn {
                display: block;
                width: 100%;
                margin-top: 20px;
                text-align: center;
            }

            /* Form Styles */
            .form-grid {
                gap: 20px;
            }

            .form-container {
                padding: 20px;
                margin: 0;
                width: 100%;
            }

            .form-progress {
                flex-direction: column;
                align-items: center;
                gap: 20px;
                padding: 0;
            }

            .form-progress::before {
                display: none;
            }

            .progress-step {
                width: 100%;
                display: flex;
                align-items: center;
                gap: 10px;
                padding: 10px;
                background: #F8F8FA;
                border-radius: 8px;
            }

            .step-number {
                margin: 0;
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }

            .step-title {
                font-size: 0.9rem;
            }

            .form-navigation {
                flex-direction: row;
                gap: 10px;
            }

            .form-navigation .btn {
                padding: 10px 15px;
                font-size: 0.95rem;
                min-width: 100px;
                font-weight: 600;
            }

            .form-features {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }

            .feature {
                width: 100%;
                justify-content: center;
                padding: 10px;
                background: #F8F8FA;
                border-radius: 8px;
            }

            .contact-info {
                padding: 20px;
            }

            .contact-info h3 {
                font-size: 1.3rem;
                margin-bottom: 15px;
            }

            .contact-item {
                padding: 12px;
            }

            .contact-item h4 {
                font-size: 1rem;
                justify-content: center;
            }

            .contact-item h4 i {
                font-size: 1.1rem;
            }

            .contact-item p {
                font-size: 0.9rem;
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            .consultation-form {
                padding: 60px 0 15px;
            }

            .form-content h1 {
                font-size: 1.5rem;
            }

            .form-content p {
                font-size: 0.9rem;
            }

            .form-container {
                padding: 15px;
                margin: 0;
                width: 100%;
            }

            .progress-step {
                padding: 8px;
            }

            .step-number {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }

            .step-title {
                font-size: 0.8rem;
            }

            .contact-info {
                padding: 15px;
            }

            .contact-item {
                padding: 10px;
            }

            .contact-item h4 {
                font-size: 0.95rem;
                justify-content: center;
            }

            .contact-item h4 i {
                font-size: 1rem;
            }

            .contact-item p {
                font-size: 0.85rem;
                text-align: center;
            }

            .form-navigation {
                gap: 8px;
            }

            .form-navigation .btn {
                padding: 8px 12px;
                font-size: 0.9rem;
                min-width: 90px;
                font-weight: 600;
            }
        }

        /* Success Popup Styles */
        .success-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .success-popup.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .popup-content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transform: translateY(20px);
            animation: slideUp 0.3s ease forwards;
        }

        .popup-content i {
            font-size: 4rem;
            color: #4BA3B3;
            margin-bottom: 20px;
        }

        .popup-content h3 {
            color: #2C3E50;
            font-size: 1.5rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .popup-content p {
            color: #7F8C8D;
            margin-bottom: 0;
            font-size: 1.1rem;
        }

        @keyframes slideUp {
            to {
                transform: translateY(0);
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }

        @media (max-width: 480px) {
            .popup-content {
                padding: 20px;
            }

            .popup-content i {
                font-size: 3rem;
            }

            .popup-content h3 {
                font-size: 1.3rem;
            }

            .popup-content p {
                font-size: 1rem;
            }
        }
    </style>

    <script>
        // Improved Navbar Toggle
        const navToggle = document.querySelector('.nav-toggle');
        const navLinks = document.querySelector('.nav-links');
        const navOverlay = document.querySelector('.nav-overlay');
        const body = document.body;

        function toggleMenu() {
            navToggle.classList.toggle('active');
            navLinks.classList.toggle('open');
            navOverlay.classList.toggle('active');
            body.style.overflow = navLinks.classList.contains('open') ? 'hidden' : '';
        }

        navToggle.addEventListener('click', toggleMenu);
        navOverlay.addEventListener('click', toggleMenu);

        // Close menu when clicking on a link
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                if (navLinks.classList.contains('open')) {
                    toggleMenu();
                }
            });
        });

        // Close menu on window resize
        window.addEventListener('resize', () => {
            if (window.innerWidth > 992 && navLinks.classList.contains('open')) {
                toggleMenu();
            }
        });

        // Form validation and submission
        const form = document.getElementById('consultationForm');
        const successPopup = document.getElementById('successPopup');

        function createErrorMessage(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.textContent = message;
            return errorDiv;
        }

        function showError(input, message) {
            input.classList.add('error');
            let errorDiv = input.parentElement.querySelector('.error-message');
            if (!errorDiv) {
                errorDiv = createErrorMessage(message);
                input.parentElement.appendChild(errorDiv);
            }
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        function clearError(input) {
            input.classList.remove('error');
            const errorDiv = input.parentElement.querySelector('.error-message');
            if (errorDiv) {
                errorDiv.style.display = 'none';
            }
        }

        function validateForm() {
            let isValid = true;
            const nameInput = document.getElementById('name');
            const phoneInput = document.getElementById('phone');
            const governorateInput = document.getElementById('governorate');
            const budgetInput = document.getElementById('budget');

            // التحقق من الاسم
            if (!nameInput.value.trim()) {
                showError(nameInput, 'الاسم الكامل مطلوب');
                isValid = false;
            } else if (nameInput.value.trim().length < 3) {
                showError(nameInput, 'الاسم يجب أن يكون 3 أحرف على الأقل');
                isValid = false;
            } else {
                clearError(nameInput);
            }

            // التحقق من رقم الهاتف
            const phoneRegex = /^9\d{8}$/;
            if (!phoneInput.value.trim()) {
                showError(phoneInput, 'رقم الهاتف مطلوب');
                isValid = false;
            } else if (!phoneRegex.test(phoneInput.value.trim())) {
                showError(phoneInput, 'رقم الهاتف يجب أن يبدأ بـ 9 ويتكون من 9 أرقام');
                isValid = false;
            } else {
                clearError(phoneInput);
            }

            // التحقق من الولاية
            if (!governorateInput.value) {
                showError(governorateInput, 'يرجى اختيار الولاية');
                isValid = false;
            } else {
                clearError(governorateInput);
            }

            // التحقق من الميزانية
            if (!budgetInput.value) {
                showError(budgetInput, 'يرجى اختيار الميزانية');
                isValid = false;
            } else {
                clearError(budgetInput);
            }

            return isValid;
        }

        // إضافة مستمعي الأحداث للحقول
        const inputs = form.querySelectorAll('input, select');
        inputs.forEach(input => {
            input.addEventListener('input', () => {
                if (input.value.trim()) {
                    clearError(input);
                }
            });

            // إضافة التحقق عند ترك الحقل
            input.addEventListener('blur', () => {
                if (!input.value.trim()) {
                    validateForm();
                }
            });
        });

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (validateForm()) {
                try {
                    successPopup.classList.add('active');
                    form.reset();
                    
                    // Auto close popup after 3 seconds
                    setTimeout(() => {
                        successPopup.style.animation = 'fadeOut 0.3s ease forwards';
                        setTimeout(() => {
                            successPopup.classList.remove('active');
                            successPopup.style.animation = '';
                        }, 300);
                    }, 3000);
                } catch (error) {
                    console.error('Error submitting form:', error);
                    alert('حدث خطأ أثناء إرسال النموذج. يرجى المحاولة مرة أخرى.');
                }
            }
        });

        // Close popup when clicking outside
        successPopup.addEventListener('click', (e) => {
            if (e.target === successPopup) {
                successPopup.style.animation = 'fadeOut 0.3s ease forwards';
                setTimeout(() => {
                    successPopup.classList.remove('active');
                    successPopup.style.animation = '';
                }, 300);
            }
        });
    </script>
</body>
</html> 